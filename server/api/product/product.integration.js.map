{"version":3,"sources":["../../../../server/api/product/product.integration.js"],"names":[],"mappings":"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","file":"product.integration.js","sourcesContent":["'use strict';\r\n\r\nvar app = require('../..');\r\nimport request from 'supertest';\r\n\r\nvar newProduct;\r\n\r\nfunction guid() {\r\n\t  function s4() {\r\n\t    return Math.floor((1 + Math.random()) * 0x10000)\r\n\t      .toString(16)\r\n\t      .substring(1);\r\n\t  }\r\n\t  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n\t    s4() + '-' + s4() + s4() + s4();\r\n};\r\n\r\n\r\ndescribe('Product API:', function() {\r\n\r\n  describe('GET /api/products', function() {\r\n    var products;\r\n\r\n    beforeEach(function(done) {\r\n      request(app)\r\n        .get('/api/products')\r\n        .expect(200)\r\n        .expect('Content-Type', /json/)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          products = res.body;\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should respond with JSON array', function() {\r\n      products.should.be.instanceOf(Array);\r\n    });\r\n\r\n  });\r\n\r\n  describe('POST /api/products', function() {\r\n    beforeEach(function(done) {\r\n      request(app)\r\n        .post('/api/products')\r\n        .send({\r\n      \t\t  Title: 'New Product',\r\n      \t\t  Author: 'Andry Baka',\r\n      \t\t  Description: 'This is a new book',\r\n      \t\t  Category: 'Book',\r\n      \t\t  Image: 'xxx',\r\n      \t\t  Price: 123,\r\n      \t\t  Stock: 5,\r\n      \t\t  Status: 'Ready'\r\n        })\r\n        .expect(201)\r\n        .expect('Content-Type', /json/)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          newProduct = res.body;\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should respond with the newly created thing', function() {\r\n      newProduct.Title.should.equal('New Thing');\r\n      newProduct.Author.should.equal('This is the brand new thing!!!');\r\n    });\r\n\r\n  });\r\n\r\n  describe('GET /api/products/:id', function() {\r\n    var product;\r\n\r\n    beforeEach(function(done) {\r\n      request(app)\r\n        .get('/api/products/' + newThing._id)\r\n        .expect(200)\r\n        .expect('Content-Type', /json/)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          product = res.body;\r\n          done();\r\n        });\r\n    });\r\n\r\n    afterEach(function() {\r\n      product = {};\r\n    });\r\n\r\n    it('should respond with the requested thing', function() {\r\n      thing.Title.should.equal('New Product');\r\n      thing.Author.should.equal('Andry Baka');\r\n    });\r\n\r\n  });\r\n\r\n  describe('PUT /api/products/:id', function() {\r\n    var updatedProduct;\r\n\r\n    beforeEach(function(done) {\r\n      request(app)\r\n        .put('/api/products/' + newThing._id)\r\n        .send({\r\n          id: guid(),\r\n\t\t  Title: 'New Product',\r\n\t\t  Author: 'Andry Baka',\r\n\t\t  Description: 'This is a new book',\r\n\t\t  Category: 'Book',\r\n\t\t  Image: 'xxx',\r\n\t\t  Price: 123,\r\n\t\t  Stock: 5,\r\n\t\t  Status: 'Ready'\r\n        })\r\n        .expect(200)\r\n        .expect('Content-Type', /json/)\r\n        .end(function(err, res) {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          updatedProduct = res.body;\r\n          done();\r\n        });\r\n    });\r\n\r\n    afterEach(function() {\r\n      updatedProduct = {};\r\n    });\r\n\r\n    it('should respond with the updated thing', function() {\r\n      updatedProduct.Title.should.equal('New Product');\r\n      updatedProduct.Author.should.equal('Andry Baka');\r\n    });\r\n\r\n  });\r\n\r\n  describe('DELETE /api/products/:id', function() {\r\n\r\n    it('should respond with 204 on successful removal', function(done) {\r\n      request(app)\r\n        .delete('/api/products/' + newProduct._id)\r\n        .expect(204)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should respond with 404 when thing does not exist', function(done) {\r\n      request(app)\r\n        .delete('/api/products/' + newProduct._id)\r\n        .expect(404)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            return done(err);\r\n          }\r\n          done();\r\n        });\r\n    });\r\n\r\n  });\r\n\r\n});\r\n"]}