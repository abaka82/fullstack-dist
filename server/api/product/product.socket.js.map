{"version":3,"sources":["../../../../server/api/product/product.socket.js"],"names":[],"mappings":";;;;AAIA;;;;;QAOgB;;AALhB;;;;;;;AAGA,IAAI,SAAS,CAAC,MAAD,EAAS,QAAT,CAAT;;AAEG,SAAS,QAAT,CAAkB,MAAlB,EAA0B;;AAE/B,OAAK,IAAI,IAAI,CAAJ,EAAO,eAAe,OAAO,MAAP,EAAe,IAAI,YAAJ,EAAkB,GAAhE,EAAqE;AACnE,QAAI,QAAQ,OAAO,CAAP,CAAR,CAD+D;AAEnE,QAAI,WAAW,eAAe,aAAa,KAAb,EAAoB,MAAnC,CAAX,CAF+D;;AAInE,sBAAc,EAAd,CAAiB,KAAjB,EAAwB,QAAxB,EAJmE;AAKnE,WAAO,EAAP,CAAU,YAAV,EAAwB,eAAe,KAAf,EAAsB,QAAtB,CAAxB,EALmE;GAArE;CAFK;;AAYP,SAAS,cAAT,CAAwB,KAAxB,EAA+B,MAA/B,EAAuC;AACrC,SAAO,UAAS,GAAT,EAAc;AACnB,WAAO,IAAP,CAAY,KAAZ,EAAmB,GAAnB,EADmB;GAAd,CAD8B;CAAvC;;AAMA,SAAS,cAAT,CAAwB,KAAxB,EAA+B,QAA/B,EAAyC;AACvC,SAAO,YAAW;AAChB,sBAAc,cAAd,CAA6B,KAA7B,EAAoC,QAApC,EADgB;GAAX,CADgC;CAAzC","file":"product.socket.js","sourcesContent":["/**\r\n * Broadcast updates to client when the model changes\r\n */\r\n\r\n'use strict';\r\n\r\nimport ProductEvents from './product.events';\r\n\r\n// Model events to emit\r\nvar events = ['save', 'remove'];\r\n\r\nexport function register(socket) {\r\n  // Bind model events to socket events\r\n  for (var i = 0, eventsLength = events.length; i < eventsLength; i++) {\r\n    var event = events[i];\r\n    var listener = createListener('product:' + event, socket);\r\n\r\n    ProductEvents.on(event, listener);\r\n    socket.on('disconnect', removeListener(event, listener));\r\n  }\r\n}\r\n\r\n\r\nfunction createListener(event, socket) {\r\n  return function(doc) {\r\n    socket.emit(event, doc);\r\n  };\r\n}\r\n\r\nfunction removeListener(event, listener) {\r\n  return function() {\r\n    ProductEvents.removeListener(event, listener);\r\n  };\r\n}"]}