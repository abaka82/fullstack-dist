{"version":3,"sources":["../../../client/components/auth/interceptor.service.js"],"names":[],"mappings":"AAAA;;AAEA,CAAC,YAAW;;AAEZ,WAAS,eAAT,CAAyB,UAAzB,EAAqC,EAArC,EAAyC,QAAzC,EAAmD,SAAnD,EAA8D,IAA9D,EAAoE;AAClE,QAAI,KAAJ,CADkE;AAElE,WAAO;;;AAEL,gCAAQ,QAAQ;AACd,eAAO,OAAP,GAAiB,OAAO,OAAP,IAAkB,EAAlB,CADH;AAEd,YAAI,SAAS,GAAT,CAAa,OAAb,KAAyB,KAAK,YAAL,CAAkB,OAAO,GAAP,CAA3C,EAAwD;AAC1D,iBAAO,OAAP,CAAe,aAAf,GAA+B,YAAY,SAAS,GAAT,CAAa,OAAb,CAAZ,CAD2B;SAA5D;AAGA,eAAO,MAAP,CALc;OAFX;;;;AAWL,4CAAc,UAAU;AACtB,YAAI,SAAS,MAAT,KAAoB,GAApB,EAAyB;AAC3B,WAAC,UAAU,QAAQ,UAAU,GAAV,CAAc,QAAd,CAAR,CAAV,CAAD,CAA6C,EAA7C,CAAgD,OAAhD;;AAD2B,kBAG3B,CAAS,MAAT,CAAgB,OAAhB,EAH2B;SAA7B;AAKA,eAAO,GAAG,MAAH,CAAU,QAAV,CAAP,CANsB;OAXnB;KAAP,CAFkE;GAApE;;AAwBA,UAAQ,MAAR,CAAe,wBAAf,EACG,OADH,CACW,iBADX,EAC8B,eAD9B,EA1BY;CAAX,CAAD","file":"interceptor.service.js","sourcesContent":["'use strict';\r\n\r\n(function() {\r\n\r\nfunction authInterceptor($rootScope, $q, $cookies, $injector, Util) {\r\n  var state;\r\n  return {\r\n    // Add authorization token to headers\r\n    request(config) {\r\n      config.headers = config.headers || {};\r\n      if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\r\n        config.headers.Authorization = 'Bearer ' + $cookies.get('token');\r\n      }\r\n      return config;\r\n    },\r\n\r\n    // Intercept 401s and redirect you to login\r\n    responseError(response) {\r\n      if (response.status === 401) {\r\n        (state || (state = $injector.get('$state'))).go('login');\r\n        // remove any stale tokens\r\n        $cookies.remove('token');\r\n      }\r\n      return $q.reject(response);\r\n    }\r\n  };\r\n}\r\n\r\nangular.module('meanonlineshopApp.auth')\r\n  .factory('authInterceptor', authInterceptor);\r\n\r\n})();\r\n"]}