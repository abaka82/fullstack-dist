{"version":3,"sources":["../../../../client/app/account/settings/settings.controller.js"],"names":[],"mappings":"AAAA;;;;;;IAEM;AACJ,WADI,kBACJ,CAAY,IAAZ,EAAkB;0BADd,oBACc;;AAChB,SAAK,MAAL,GAAc,EAAd,CADgB;AAEhB,SAAK,SAAL,GAAiB,KAAjB,CAFgB;;AAIhB,SAAK,IAAL,GAAY,IAAZ,CAJgB;GAAlB;;eADI;;mCAQW,MAAM;;;AACnB,WAAK,SAAL,GAAiB,IAAjB,CADmB;;AAGnB,UAAI,KAAK,MAAL,EAAa;AACf,aAAK,IAAL,CAAU,cAAV,CAAyB,KAAK,IAAL,CAAU,WAAV,EAAuB,KAAK,IAAL,CAAU,WAAV,CAAhD,CACG,IADH,CACQ,YAAM;AACV,gBAAK,OAAL,GAAe,gCAAf,CADU;SAAN,CADR,CAIG,KAJH,CAIS,eAAO;AACZ,gBAAM,IAAI,IAAJ,CADM;AAEZ,eAAK,QAAL,CAAc,YAAd,CAA2B,UAA3B,EAAuC,KAAvC,EAFY;AAGZ,cAAI,IAAI,OAAJ,KAAgB,wBAAhB,EAA0C;AAC3C,kBAAK,MAAL,CAAY,KAAZ,GAAoB,6DAApB,CAD2C;WAA9C,MAGK;AACF,kBAAK,MAAL,CAAY,KAAZ,GAAoB,oBAApB,CADE;WAHL;AAMA,gBAAK,OAAL,GAAe,EAAf,CATY;SAAP,CAJT,CADe;OAAjB;;;;SAXE;;;AA+BN,QAAQ,MAAR,CAAe,mBAAf,EACG,UADH,CACc,oBADd,EACoC,kBADpC","file":"settings.controller.js","sourcesContent":["'use strict';\r\n\r\nclass SettingsController {\r\n  constructor(Auth) {\r\n    this.errors = {};\r\n    this.submitted = false;\r\n\r\n    this.Auth = Auth;\r\n  }\r\n\r\n  changePassword(form) {\r\n    this.submitted = true;\r\n\r\n    if (form.$valid) {\r\n      this.Auth.changePassword(this.user.oldPassword, this.user.newPassword)\r\n        .then(() => {\r\n          this.message = 'Password successfully changed.';\r\n        })\r\n        .catch(err => {\r\n          err = err.data;\r\n          form.password.$setValidity('mongoose', false);\r\n          if (err.message === 'User validation failed') {\r\n             this.errors.other = 'New password is shorter than the minimum allowed length (6)';\r\n          }\r\n          else {\r\n             this.errors.other = 'Incorrect password';\r\n          }\r\n          this.message = '';\r\n        });\r\n    }\r\n  }\r\n}\r\n\r\nangular.module('meanonlineshopApp')\r\n  .controller('SettingsController', SettingsController);\r\n"]}