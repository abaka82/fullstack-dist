{"version":3,"sources":["../../../../client/app/account/signup/signup.controller.js"],"names":[],"mappings":"AAAA;;;;;;IAEM;;;AAOJ,WAPI,gBAOJ,CAAY,IAAZ,EAAkB,MAAlB,EAA0B;0BAPtB,kBAOsB;;SAL1B,OAAO,GAKmB;SAJ1B,SAAS,GAIiB;SAH1B,YAAY,MAGc;;AACxB,SAAK,IAAL,GAAY,IAAZ,CADwB;AAExB,SAAK,MAAL,GAAc,MAAd,CAFwB;GAA1B;;;;eAPI;;6BAYK,MAAM;;;AACb,WAAK,SAAL,GAAiB,IAAjB,CADa;;AAGb,UAAI,KAAK,MAAL,EAAa;AACf,aAAK,IAAL,CAAU,UAAV,CAAqB;AACnB,qBAAW,KAAK,IAAL,CAAU,SAAV;AACX,oBAAU,KAAK,IAAL,CAAU,QAAV;AACV,iBAAO,KAAK,IAAL,CAAU,KAAV;AACP,oBAAU,KAAK,IAAL,CAAU,QAAV;SAJZ,EAMC,IAND,CAMM,YAAM;;AAEV,gBAAK,MAAL,CAAY,EAAZ,CAAe,YAAf,EAFU;SAAN,CANN,CAUC,KAVD,CAUO,eAAO;AACZ,gBAAM,IAAI,IAAJ,CADM;AAEZ,gBAAK,MAAL,GAAc,EAAd;;;AAFY,iBAKZ,CAAQ,OAAR,CAAgB,IAAI,MAAJ,EAAY,UAAC,KAAD,EAAQ,KAAR,EAAkB;AAC5C,iBAAK,KAAL,EAAY,YAAZ,CAAyB,UAAzB,EAAqC,KAArC,EAD4C;AAE5C,kBAAK,MAAL,CAAY,KAAZ,IAAqB,MAAM,OAAN,CAFuB;WAAlB,CAA5B,CALY;SAAP,CAVP,CADe;OAAjB;;;;SAfE;;;AAwCN,QAAQ,MAAR,CAAe,mBAAf,EACG,UADH,CACc,kBADd,EACkC,gBADlC","file":"signup.controller.js","sourcesContent":["'use strict';\r\n\r\nclass SignupController {\r\n  //start-non-standard\r\n  user = {};\r\n  errors = {};\r\n  submitted = false;\r\n  //end-non-standard\r\n\r\n  constructor(Auth, $state) {\r\n    this.Auth = Auth;\r\n    this.$state = $state;\r\n  }\r\n\r\n  register(form) {\r\n    this.submitted = true;\r\n\r\n    if (form.$valid) {\r\n      this.Auth.createUser({\r\n        firstname: this.user.firstname,\r\n        lastname: this.user.lastname,\r\n        email: this.user.email,\r\n        password: this.user.password\r\n      })\r\n      .then(() => {\r\n        // Account created, redirect to home\r\n        this.$state.go('index.main');\r\n      })\r\n      .catch(err => {\r\n        err = err.data;\r\n        this.errors = {};\r\n\r\n        // Update validity of form fields that match the mongoose errors\r\n        angular.forEach(err.errors, (error, field) => {\r\n          form[field].$setValidity('mongoose', false);\r\n          this.errors[field] = error.message;\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nangular.module('meanonlineshopApp')\r\n  .controller('SignupController', SignupController);\r\n"]}